<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.trip.diary.model.mapper.DiaryMapper">
    <resultMap type="attractionResponseDto" id="attractionResponseDto" >
        <result column="content_id" property="contentId"></result>
        <result column="content_type_id" property="contentTypeId"></result>
        <result column="title" property="title"></result>
        <result column="addr1" property="addr1"></result>
        <result column="addr2" property="addr2"></result>
        <result column="zipcode" property="zipcode"></result>
        <result column="tel" property="tel"></result>
        <result column="first_image" property="firstImage"></result>
        <result column="first_image2" property="firstImage2"></result>
        <result column="sido_code" property="sidoCode"></result>
        <result column="gugun_code" property="gugunCode"></result>
        <result column="latitude" property="latitude"></result>
        <result column="longitude" property="longitude"></result>
    </resultMap>	
	
<!-- 	<resultMap type="diaryResponseDto" id="diaryResponseDto">
		<result column="" property=""></result>
		<result column="" property=""></result>
		<result column="" property=""></result>
		<result column="" property=""></result>
		<result column="" property=""></result>
		<result column="" property=""></result>
		<result column="" property=""></result>
		<result column="" property=""></result>
		<result column="" property=""></result>
		<result column="" property=""></result>
	</resultMap> -->
    <select id="getAttractionListByTitle" parameterType="String" resultMap="attractionResponseDto">
        select content_id, content_type_id, title, addr1, addr2, zipcode, tel, 
        		first_image, first_image2, sido_code, gugun_code, latitude, longitude
		from attraction_info
		where title like concat('%', #{title}, '%');
    </select>
    
 	<insert id="createDiary" parameterType="diaryRequestDto">
		insert into travel_diary (travel_time, id, content_id, title, content, 
			 weather, emotion, is_public)
		values (#{travelTime}, #{id}, #{contentId}, #{title}, #{content},
			#{weather}, #{emotion}, #{isPublic})
		<selectKey resultType="int" keyProperty="diaryNo" order="AFTER">
			select last_insert_id()
		</selectKey>
	</insert>    
    
</mapper>